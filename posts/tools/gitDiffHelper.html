<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/favicon.ico"><title>IntelliJ IDEA git修改统计插件 | Walter's blog</title><meta name="description" content="">
    <link rel="modulepreload" href="/assets/app.83173f58.js"><link rel="modulepreload" href="/assets/gitDiffHelper.html.6e7afc0c.js"><link rel="modulepreload" href="/assets/gitDiffHelper.html.4b577441.js"><link rel="prefetch" href="/assets/formula.html.be9834a6.js"><link rel="prefetch" href="/assets/aboutTdd.html.bf3ef171.js"><link rel="prefetch" href="/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/assets/index.html.2d454c78.js"><link rel="prefetch" href="/assets/index.html.e154b072.js"><link rel="prefetch" href="/assets/formula.html.a04485fb.js"><link rel="prefetch" href="/assets/aboutTdd.html.805241e4.js"><link rel="prefetch" href="/assets/404.html.ccf7a8ac.js"><link rel="prefetch" href="/assets/index.html.f2f42562.js"><link rel="prefetch" href="/assets/index.html.b658d765.js"><link rel="prefetch" href="/assets/404.5fa2ea56.js"><link rel="prefetch" href="/assets/Layout.2b4a1a7c.js"><link rel="prefetch" href="/assets/Home.542a2cfc.js"><link rel="prefetch" href="/assets/Timeline.2a02f157.js">
    <link rel="stylesheet" href="/assets/style.92a97c99.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-navbar no-sidebar content_container"><!--[--><div class="header_container" data-v-8c6ec03c><div class="blog_header_container" data-v-8c6ec03c data-v-4d49e923><div class="blog_header_top_container" data-v-4d49e923><div class="header_left_container" data-v-4d49e923><div class="header_left" data-v-4d49e923><div class="name_container" data-v-4d49e923><span data-v-4d49e923>Walter&#39;s blog</span></div><div class="description" data-v-4d49e923><span data-v-4d49e923>折腾日志</span></div></div></div><div class="header_right_container" data-v-4d49e923><div class="header_right" data-v-4d49e923><div class="links_container" data-v-4d49e923 data-v-6eb1409b><div class="icon_container" data-v-6eb1409b data-v-3b2365ca><div data-v-3b2365ca><svg t="1659970448935" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6078" data-spm-anchor-id="a313x.7781069.0.i14" width="24" height="24"><path d="M426.666667 853.333333l0-256 170.666667 0 0 256 213.333333 0 0-341.333333 128 0-426.666667-384-426.666667 384 128 0 0 341.333333z" p-id="6079" fill="#515151"></path></svg></div></div><div class="icon_container" data-v-6eb1409b data-v-3b2365ca><div data-v-3b2365ca><svg t="1659874720516" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12285" width="24" height="24"><path d="M957.4 197.2l-135.2 637.6c-10.2 45-36.8 56.2-74.6 35l-206-151.8-99.4 95.6c-11 11-20.2 20.2-41.4 20.2l14.8-209.8 381.8-345c16.6-14.8-3.6-23-25.8-8.2L299.6 568 96.4 504.4c-44.2-13.8-45-44.2 9.2-65.4L900.4 132.8c36.8-13.8 69 8.2 57 64.4z" p-id="12286" fill="#515151"></path></svg></div></div><div class="icon_container" data-v-6eb1409b data-v-3b2365ca><div data-v-3b2365ca><svg t="1659970485307" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7071" width="24" height="24"><path d="M512 576a32 32 0 0 1-17.184-4.992L128 337.568v430.656A64 64 0 0 0 192.064 832h639.872A64 64 0 0 0 896 768.224V337.888l-366.816 233.12A32.096 32.096 0 0 1 512 576" p-id="7072" fill="#515151"></path><path d="M831.936 192H192.064A64 64 0 0 0 128 255.808v4.896l384 245.376 384-244.032v-6.24A64 64 0 0 0 831.936 192" p-id="7073" fill="#515151"></path></svg></div></div><div class="icon_container" data-v-6eb1409b data-v-3b2365ca><div data-v-3b2365ca><svg t="1659862599249" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9963" width="24" height="24"><path d="M938.666667 512a426.666667 426.666667 0 0 1-291.84 404.48 22.186667 22.186667 0 0 1-19.2-2.986667 21.76 21.76 0 0 1-8.96-17.493333v-113.92a170.666667 170.666667 0 0 0-21.333334-87.893333 10.666667 10.666667 0 0 1 0-11.52 11.52 11.52 0 0 1 8.533334-5.973334c104.106667-10.666667 162.133333-52.053333 162.133333-164.693333a200.96 200.96 0 0 0-50.773333-143.36 183.466667 183.466667 0 0 0 8.106666-51.2 184.746667 184.746667 0 0 0-6.4-46.08 20.906667 20.906667 0 0 0-22.613333-15.36 189.866667 189.866667 0 0 0-104.106667 50.346667 422.826667 422.826667 0 0 0-160.426666 0A189.866667 189.866667 0 0 0 327.68 256a20.906667 20.906667 0 0 0-22.613333 15.36A184.746667 184.746667 0 0 0 298.666667 317.44a183.466667 183.466667 0 0 0 8.106666 51.2A200.96 200.96 0 0 0 256 512c0 118.613333 64.426667 158.293333 182.613333 168.106667a158.293333 158.293333 0 0 0-29.44 65.28v5.12a29.013333 29.013333 0 0 0 0 5.973333 25.173333 25.173333 0 0 1-27.306666 21.76 42.666667 42.666667 0 0 1-18.346667-5.12 227.84 227.84 0 0 1-60.586667-53.76 430.506667 430.506667 0 0 0-34.133333-34.56 116.906667 116.906667 0 0 0-25.173333-16.64 20.906667 20.906667 0 0 0-20.48 0 21.333333 21.333333 0 0 0-9.813334 17.92v2.56a21.333333 21.333333 0 0 0 9.813334 17.92 193.706667 193.706667 0 0 1 39.253333 44.8 282.026667 282.026667 0 0 0 67.84 73.386667 105.813333 105.813333 0 0 0 59.733333 17.92h15.36V896a21.76 21.76 0 0 1-8.96 17.493333 22.186667 22.186667 0 0 1-19.2 2.986667A426.666667 426.666667 0 1 1 938.666667 512z" p-id="9964" fill="#515151"></path></svg></div></div></div></div></div></div><div class="blog_header_bottom_container" data-v-4d49e923><div class="menu_container" data-v-4d49e923 data-v-5a448de0></div></div></div></div><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="intellij-idea-git修改统计插件" tabindex="-1"><a class="header-anchor" href="#intellij-idea-git修改统计插件" aria-hidden="true">#</a> IntelliJ IDEA git修改统计插件</h1><h2 id="起因" tabindex="-1"><a class="header-anchor" href="#起因" aria-hidden="true">#</a> 起因</h2><p>公司新增了MR不能超过500行的要求。如果MR修改小于500行，只需要committer与其他开发同学打分总和达到3分就可以合入。</p><p>如果一次MR的代码超过500行，MR提交人需要拉会几个伙伴和committer进行集中检视，开发同学需要向伙伴们讲解代码的设计思路，也要回答各个同学的对代码的疑问；只有经过集中检视并且MR总分达到3分这个MR才能合入。</p><p>公司的MR检视流程可以让一些比较明显的缺陷在合入前就被识别出来。例如潜在的SQL注入缺陷，不合理的查询语句等。但是一个超过500行修改的MR会增大各个检视同学的负担，最可能的情况是大多数检视同学匆匆扫了一眼代码后给代码默默的打上1分。这样就失去了MR检视流程的作用，所以为了减少检视同学的负担，公司规定每个MR超过500行后需要集中检视，大家一起上会检视代码。</p><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题" aria-hidden="true">#</a> 问题</h2><p>500行的限制实施后不出意外地给开发同学带来了不少麻烦。一个典型的情况是，开发同学A忙活了半天提交MR后发现修改了700行，如果开一个集中检视需要协调各位开发同学的时间，过于麻烦。于是同学A选择撤回MR，将这个MR拆分为2个小于500行的提交后再分两次提交MR。</p><p>这里小A同学从第一次提交MR到MR被拆成2个提交之间的操作所花费的时间属于不必要的浪费，如果用的是Java这种需要编译的语言，一个提交拆分为两个还需要使得编译能够通过，耗费的时间将会更多。</p><h2 id="方案" tabindex="-1"><a class="header-anchor" href="#方案" aria-hidden="true">#</a> 方案</h2><p>如果开发同学知道现在有多少代码还未提交，就能在修改接近500行前commit修改并提交MR，然后接着写后面的逻辑。</p><p>但是Java、C++开发同学可能会说，我500行的时候功能还没写完，代码还不能编译通过怎么提交MR。答案就是要有良好的编码习惯，先编写抽象将问题的整体逻辑组织起来，这时业务逻辑由接口和抽象类组成并且可以编译通过，commit并提交MR；然后接着写实现细节或另一部分的抽象，commit后提MR。如此往复就能通过多个不超过500行的MR将功能实现出来。</p><h2 id="工具" tabindex="-1"><a class="header-anchor" href="#工具" aria-hidden="true">#</a> 工具</h2><p>有了方案就开始做工具，工具是基于Intellij Idea平台开发的插件，可以在插件市场搜索<strong>GitDiffHelper</strong>下载到。</p><p><img src="/assets/image-20220814221206045.cb54cbd0.png" alt="image-20220814221206045"></p><p><strong>插件只有简单的两个功能</strong></p><p>如下图，在插件底部会的状态栏显示当前未提交的修改代码行数。</p><p><img src="/assets/68747470733a2f2f706c7567696e732e6a657.c5493f3f.png" alt="image"></p><p>也可以比较两个分支间的差异。</p><p><img src="/assets/d393536642d316631633139316664363039.352bc1eb.png" alt="d393536642d316631633139316664363039"></p><p>插件已开源到<a href="https://github.com/WalterInKitchen/git_diff_idea_plugin" target="_blank" rel="noopener noreferrer">GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，目前只是一个可用的最小实现，如果你愿意可以完善它。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: WalterInKitchen@outlook.com">Walter</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.83173f58.js" defer></script>
  </body>
</html>
